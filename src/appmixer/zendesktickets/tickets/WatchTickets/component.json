{
    "name": "appmixer.zendesktickets.tickets.WatchTickets",
    "author": "Appmixer <info@appmixer.com>",
    "icon": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPgo8c3ZnIGZpbGw9IiMwMDAwMDAiIHdpZHRoPSI4MDBweCIgaGVpZ2h0PSI4MDBweCIgdmlld0JveD0iMCAwIDE0IDE0IiByb2xlPSJpbWciIGZvY3VzYWJsZT0iZmFsc2UiIGFyaWEtaGlkZGVuPSJ0cnVlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0gNi41NDI1LDExLjU0NzUgLTUuNTQyNSwwIDUuNTQyNSwtNi42OTE1IDAsNi42OTE1IHogbSA2LjQ1NzUsMCAtNS41NDI1LDAgYyAwLC0xLjUzMTUgMS4yMzk1LC0yLjc3MTUgMi43NzE1LC0yLjc3MTUgMS41MzE1LDAgMi43NzEsMS4yNDEgMi43NzEsMi43NzE1IHogbSAtNS41NDI1LC0yLjQwMiAwLC02LjY5MyA1LjU0MjUsMCAtNS41NDI1LDYuNjkzIHogTSA2LjU0MjUsMi40NTI1IEMgNi41NDI1LDMuOTgzIDUuMzAyLDUuMjI0NSAzLjc3MSw1LjIyNDUgMi4yNDEsNS4yMjQ1IDEsMy45ODQgMSwyLjQ1MzUgbCA1LjU0MjUsMCAwLC0xMGUtNCB6Ii8+PC9zdmc+",
    "webhook": true,
    "auth": {
        "service": "appmixer:zendesktickets",
        "scope": [
            "webhooks:write",
            "triggers:write"
        ]
    },
    "properties": {
        "schema": {
            "type": "object",
            "properties": {
                "updateType": { "type": "string" },
                "typeCondition": { "type": "object" },
                "statusCondition": { "type": "object" },
                "priorityCondition": { "type": "object" }
            }
        },
        "inspector": {
            "inputs": {
                "updateType": {
                    "type": "select",
                    "label": "Update Type",
                    "description": "Detect either new or updated tickets.",
                    "index": 0,
                    "options": [
                        { "label": "Created", "value": "Create" },
                        { "label": "Changed", "value": "Change" }
                    ]
                },
                "typeCondition": {
                    "type": "expression",
                    "label": "Type Condition",
                    "description": "Filter tickets by type condition.",
                    "index": 1,
                    "levels": ["ADD"],
                    "fields": {
                        "operator": {
                            "type": "select",
                            "label": "Operator",
                            "options": [
                                { "label": "Is", "value": "is" },
                                { "label": "Is Not", "value": "is_not" }
                            ]
                        },
                        "value": {
                            "type": "select",
                            "label": "Type",
                            "options": [
                                { "label": "Question", "value": "question" },
                                { "label": "Incident", "value": "incident" },
                                { "label": "Problem", "value": "problem" },
                                { "label": "Task", "value": "task" }
                            ]
                        }
                    }
                },
                "statusCondition": {
                    "type": "expression",
                    "label": "Status Condition",
                    "description": "Filter tickets by status condition.",
                    "index": 1,
                    "levels": ["ADD"],
                    "fields": {
                        "operator": {
                            "type": "select",
                            "label": "Operator",
                            "options": [
                                { "label": "Is", "value": "is" },
                                { "label": "Is Not", "value": "is_not" },
                                { "label": "Less Than", "value": "less_than" },
                                { "label": "Greater Than", "value": "greater_than" }
                            ]
                        },
                        "value": {
                            "type": "select",
                            "label": "Status",
                            "options": [
                                { "label": "New", "value": "new" },
                                { "label": "Open", "value": "open" },
                                { "label": "Pending", "value": "pending" },
                                { "label": "Hold", "value": "hold" },
                                { "label": "Solved", "value": "solved" },
                                { "label": "Closed", "value": "closed" }
                            ]
                        }
                    }
                },
                "priorityCondition": {
                    "type": "expression",
                    "label": "Priority Condition",
                    "description": "Filter tickets by priority condition.",
                    "index": 1,
                    "levels": ["ADD"],
                    "fields": {
                        "operator": {
                            "type": "select",
                            "label": "Operator",
                            "options": [
                                { "label": "Is", "value": "is" },
                                { "label": "Is Not", "value": "is_not" },
                                { "label": "Less Than", "value": "less_than" },
                                { "label": "Greater Than", "value": "greater_than" }
                            ]
                        },
                        "value": {
                            "type": "select",
                            "label": "Priority",
                            "options": [
                                { "label": "Low", "value": "low" },
                                { "label": "Normal", "value": "normal" },
                                { "label": "High", "value": "high" },
                                { "label": "Urgent", "value": "urgent" },
                                { "label": "No priority", "value": "" }
                            ]
                        }
                    }
                }
            }
        }
    },
    "outPorts": [
        {
            "name": "out",
            "options": [
                { "label": "Ticket", "value": "ticket", "schema": {
                    "type": "object",
                    "properties": {
                        "id": { "type": "string" },
                        "subject": { "type": "string" },
                        "status": { "type": "string" },
                        "priority": { "type": "string" },
                        "type": { "type": "string" },
                        "recipient": { "type": "string" },
                        "tags": { "type": "array", "items": { "type": "string" } }
                    }
                } }
            ]
        }
    ]
}


